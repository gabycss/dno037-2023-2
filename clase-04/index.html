<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>DNO037</title>
        <link href="style.css" rel="stylesheet">
    </head>
    <body>
        <header>
            <h1>
                <a href="index.html">Nombre Apellido</a>
                <a href="https://learn.ml5js.org/#/tutorials/hello-ml5">Hello ml5.js</a>
            </h1>
        </header>
        <main id="robot"></main>
        <footer>
            <p><a href="https://github.com/profesorfaco/dno037-2023-2">Diseño y nuevos medios</a> <a href="https://github.com/profesorfaco/dno037-2023-2/tree/main/clase-03">23 de agosto, 2023</a></p>
        </footer>        


        <!-- p5.js, su nombre refiere a Proce55ing-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.0.0/p5.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.0.0/addons/p5.sound.min.js"></script>
        <!-- ml5.js, su nombre refiere al Machine Learning -->
        <script src="https://unpkg.com/ml5@latest/dist/ml5.min.js"></script>        
        <script>
            // Options for the SpeechCommands18w model, the default probabilityThreshold is 0
            const options = { probabilityThreshold: 0.9 };
            const classifier = ml5.soundClassifier("SpeechCommands18w", options, modelReady);
            var resultado;
            var todo;

            function setup() {
                noCanvas;
                resultado = createP("diga…").parent("#robot");
                todo = select("body");
            }

            function modelReady() {
                // classify sound
                classifier.classify(gotResult);
            }

            function gotResult(error, result) {
                if (error) {
                    console.log(error);
                    return;
                }
                // log the result
                console.log(result);
                resultado.html(result[0].label).class('big');
                if (result[0].label === "stop") {
                    todo.style("background", "black");
                    resultado.style("color", "white");
                    resultado.style("padding-left",'0');
                } else if (result[0].label === "right") {
                    resultado.style("color", "white");
                    resultado.style("padding-left",'30vw');
                } else {
                    resultado.style("color", "white");
                    resultado.style("padding-left",'0');
                }
            }
        </script>
    </body>
</html>
